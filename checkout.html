<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Your vacation, tours and travel theme needs are all met at emprise." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>結帳 | 快樂遊</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="./assets/favicon.ico" />
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="./styles/plugins.css" />
    <!-- Main CSS -->
    <link rel="stylesheet" href="./styles/main.css" />
    <link rel="stylesheet" type="text/css" href="./styles/flexslider.css" media="all" />
    <script src="./js/jquery-2.1.1.min.js"></script>
  </head>

  <body class="rlr-body">
    <!-- Header -->
    <header>
      <nav id="navigation" class="navigation rlr-navigation default-nav fixed-top">
        <!-- Logo -->
        <div class="navigation-header">
          <div class="navigation-brand-text">
            <div class="rlr-logo rlr-logo__navbar-brand rlr-logo--default">
              <a href="./index.html">
                <img src="./assets/logo.png" alt="#" style="width: 70px" class="" />
              </a>
            </div>
          </div>
          <div class="navigation-button-toggler" style="display: none">
            <span class="rlr-sVGIcon"> <i class="rlr-icon-font rlr-icon-font--megamenu flaticon-menu"> </i> </span>
          </div>
        </div>
        <div class="navigation-body rlr-navigation__body container">
          <div class="navigation-body-header rlr-navigation__body-header">
            <div class="navigation-brand-text">
              <div class="rlr-logo rlr-logo__navbar-brand rlr-logo--default">
                <a href="./index.html">
                  <img src="./assets/logo.png" alt="#" style="height: 70px" class="" />
                </a>
              </div>
            </div>
            <span class="rlr-sVGIcon navigation-body-close-button"> <i class="rlr-icon-font rlr-icon-font--megamenu flaticon-close"> </i> </span>
          </div>

            <!-- User account dropdown -->
            <li class="navigation-item" style="display: none">
              <a class="navigation-link" href="#"> User <img class="ui right spaced avatar image" src="./assets/images/avatar.png" alt="account avatar" /> </a>
              <ul class="navigation-dropdown">
                <li class="navigation-dropdown-item">
                  <a class="navigation-dropdown-link" href="./my-account-pages--dashboard.html">我的檔案</a>
                </li>
                <li class="navigation-dropdown-item">
                  <a class="navigation-dropdown-link" href="./my-account-pages--order.html">我的訂單</a>
                </li>
                <li class="navigation-dropdown-item">
                  <hr class="dropdown-divider rlr-dropdown__divider" />
                </li>
                <li class="navigation-dropdown-item">
                  <a class="navigation-dropdown-link" href="./account-pages--login.html">登出</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <!-- Main Content -->
    <main id="rlr-main" class="rlr-main--fixed-top">
      <div class="rlr-section__content--md-top">
        <div class="rlr-section rlr-section__my">
          <div class="rlr-checkout">
            <article id="post-7" class="post-7 page type-page status-publish hentry">
              <div class="container-xxl">
                <div class="entry-content">
                  <div class="woocommerce">
                    <div class="woocommerce-info">
                      <div class="rlr-page-title">
                        <span class="rlr-page-title__icon"> <i class="rlr-icon-font flaticon-carbon-shopping-cart"> </i> </span>
                        <div>
                          <h2 class="type-h3 rlr-page-title__title">結帳</h2>
                          <span class="rlr-page-title__desc">請儘速完成結帳資訊填寫以確保名額確立</span>
                        </div>
                      </div>
                    </div>
                   
                    <div class="woocommerce-notices-wrapper"></div>
                    <form name="checkout" method="post" class="checkout woocommerce-checkout" action="https://ui.emprise.tours/order-received/" enctype="multipart/form-data" novalidate="novalidate">
                      <div class="col2-set" id="customer_details">
                        <div class="col-1">
                          <div class="woocommerce-billing-fields">
                            <div class="woocommerce-billing-fields__field-wrapper">
                              <h6 class="checkout__section-title">
                                <span> 訂購人資訊 </span>
                              </h6>
                              <div class="checkout__personal-details">
                                <p class="form-row form-row-first validate-required" id="billing_first_name_field" data-priority="10">
                                  <label for="billing_first_name" class=""> 姓名 </label>
                                  <span class="woocommerce-input-wrapper">
                                    <input type="text" class="input-text" name="billing_first_name" id="billing_name" placeholder="王小明" value=""  />
                                  </span>
                                </p>
                                <p class="form-row form-row-wide validate-required validate-phone" id="billing_phone_field" data-priority="100">
                                  <label for="billing_phone" class=""> 手機號碼 </label>
                                  <span class="woocommerce-input-wrapper">
                                    <input type="tel" class="input-text" name="billing_phone" id="billing_phone" placeholder="0900000000" value=""  />
                                  </span>
                                </p>
                                <p class="form-row form-row-first validate-required" id="billing_user_id_field" data-priority="10">
                                  <label for="billing_first_name" class=""> 身分證字號 </label>
                                  <span class="woocommerce-input-wrapper">
                                    <input type="text" class="input-text" name="billing_first_name" id="billing_id" placeholder="A123456789" value=""  />
                                  </span>
                                </p>
                                <p class="form-row form-row-wide validate-required validate-email" id="billing_email_field" data-priority="110">
                                  <label for="billing_email" class=""> Email（訂單寄送） </label>
                                  <span class="woocommerce-input-wrapper">
                                    <input type="email" class="input-text" name="billing_email" id="billing_email" placeholder="請確保填寫正確以接收訂單資訊" value=""  />
                                  </span>
                                </p>
                                <p class="form-row address-field street-address-1 validate-required form-row-wide" id="billing_address_1_field" data-priority="50">
                                  <label for="billing_address_1" class=""> 地址 </label>
                                  <span class="woocommerce-input-wrapper">
                                    <input type="text" class="input-text" name="billing_address_1" id="billing_address" placeholder="發票寄送地址" value=""  data-placeholder="House number and street name" />
                                  </span>
                                </p>
                              </div>
                              <div id="passenger0">
                                <h6 class="checkout__section-title">
                                  <span> 第一位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <div id="passenger1">
                                <h6 class="checkout__section-title">
                                  <span> 第二位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <div id="passenger2" style="display: none">
                                <h6 class="checkout__section-title">
                                  <span> 第三位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <div id="passenger3" style="display: none">
                                <h6 class="checkout__section-title">
                                  <span> 第四位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <div id="passenger4" style="display: none">
                                <h6 class="checkout__section-title">
                                  <span> 第五位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <div id="passenger5" style="display: none">
                                <h6 class="checkout__section-title">
                                  <span> 第六位旅客資訊 </span>
                                </h6>
                                <div class="checkout__personal-details">
                                  <p class="form-row form-row-first validate-required" id="passenger_name_field" data-priority="10">
                                    <label for="passenger_name" class=""> 中文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_name" id="passenger_name" placeholder="王小明" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_eng_name_field" data-priority="10">
                                    <label for="passenger_eng_name" class=""> 英文姓名 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_eng_name" id="passenger_eng_name" placeholder="XiaoMing Wang" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide validate-required validate-phone" id="passenger_num_field" data-priority="100">
                                    <label for="passenger_num" class=""> 護照號碼 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="tel" class="input-text" name="passenger_num" id="passenger_num" placeholder="123456789" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-first validate-required" id="passenger_passport_valid_field" data-priority="10">
                                    <label for="passenger_passport_valid" class=""> 護照有效日期 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="text" class="input-text" name="passenger_passport_valid" id="passenger_passport_valid" placeholder="08 AUG 2032" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_sex_field" data-priority="110">
                                    <label for="passenger_sex" class=""> 性別 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_sex" id="passenger_sex" placeholder="男" value=""  />
                                    </span>
                                  </p>
                                  <p class="form-row form-row-wide " id="passenger_birth_field" data-priority="110">
                                    <label for="passenger_birth" class=""> 出生年月日 </label>
                                    <span class="woocommerce-input-wrapper">
                                      <input type="email" class="input-text" name="passenger_birth" id="passenger_birth" placeholder="1989/09/29" value=""  />
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <h6 class="checkout__section-title">
                                <span> 選擇班機 </span>
                              </h6>
                              <div id="payment" class="woocommerce-checkout-payment">
                                <ul id="planelist" class="wc_payment_methods payment_methods methods">
                                  
                                </ul>
                                
                              </div>
                              
                            </div>
                          </div>
                        </div>
                        <div class="col-2">
                          <div class="woocommerce-shipping-fields"></div>
                          <div class="woocommerce-additional-fields">
                            <h3>Additional information</h3>
                            <div class="woocommerce-additional-fields__field-wrapper">
                              <p class="form-row notes" id="order_comments_field" data-priority="">
                                <label for="order_comments" class="">
                                  Order notes
                                  <span class="optional"> (optional) </span>
                                </label>
                                <span class="woocommerce-input-wrapper">
                                  <textarea name="order_comments" class="input-text" id="order_comments" placeholder="Notes about your order, e.g. special notes for delivery." rows="2" cols="5"></textarea>
                                </span>
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div id="order_review" class="woocommerce-checkout-review-order" style="display: none;">
                        <table class="shop_table woocommerce-checkout-review-order-table">
                          <tbody>
                            <tr class="cart_item">
                              <td class="product-name">
                                <h6 class="cart-item-title">你的訂單</h6>
                                <ul class="cart-item-card">
                                  <li class="cart-item-card__header">
                                    <div>
                                      <img id="_img" class="cart-item-card__img" src="./assets/images/card_items-photo.jpg" alt="..." />
                                    </div>
                                    <div>
                                      <p class="cart-item-card__title" id="_title">Mountain Hiking Tour</p>
                                      <p class="cart-item-card__date">
                                        <span id="_subtitle"> Preferred date </span>
                                        <span id="_date"> 21/04/22 </span>
                                      </p>
                                    </div>
                                  </li>
                                  <li class="cart-item-card__item">
                                    <span class="cart-item-card__close">
                                      <i class="rlr-icon-font flaticon-cross"></i>
                                    </span>
                                    <div class="cart-item-card__iconcontainer">
                                      <span>
                                        <i class="rlr-icon-font flaticon-carbon-user"></i>
                                      </span>
                                    </div>
                                    <div class="cart-item-card__item-title">
                                      <p>成人</p>
                                      <p>
                                        <b id="_price"> NT 7000 </b>
                                      </p>
                                    </div>
                                    <p class="cart-item-card__item-number">
                                      <span class="times"> x </span>
                                      <select id="pselect" onchange="updatePrice()">
                                        <option value="2" selected>2人</option>
                                        <option value="4">4人</option>
                                        <option value="6">6人</option>
                                      </select>
                                    </p>
                                    <p id="_total1" class="cart-item-card__item-price">NT 7000</p>
                                  </li>
                                  
                                  <li class="cart-item-card__footer">
                                    <p>總金額</p>
                                    <p id="_total2">NT 10,500</p>
                                  </li>
                                </ul>
                              </td>
                            </tr>
                          </tbody>
                          <tfoot>
                            
                            <tr class="order-total">
                              <th>結帳總金額</th>
                              <td>
                                <strong>
                                  <span class="woocommerce-Price-amount amount">
                                    <bdi>
                                      <span class="woocommerce-Price-currencySymbol"> 新台幣 </span>
                                      <total id="totalAmount"></total>
                                    </bdi>
                                  </span>
                                </strong>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <button type="button" onclick="checkform()" class="button alt" name="woocommerce_checkout_place_order" id="place_order" value="Place order">完成預定</button>
                              </td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                    </form>

                    
                  </div>
                </div>
                <!-- .entry-content -->
              </div>
            </article>
            <!-- #post-7 -->
          </div>
        </div>
      </div>
    </main>
    <!-- Footer -->
    <footer class="rlr-footer rlr-section rlr-section__mt">
      <div class="container">
        <div class="rlr-footer__getintouch">
          <div class="rlr-footer__getintouch_col rlr-footer__getintouch__col--title">
            <h4>預遊網</h4>
            <p>滿足你對旅行的想像</p>
          </div>
          
        </div>
        <!-- Footer menu -->
        <div class="rlr-footer__menu">
          
          <nav class="rlr-footer__menu__col">
            <!-- Footer menu col -->
            <h4>友善連結</h4>
            <ul>
              <li><a href="https://www.liontravel.com/">雄獅旅遊</a></li>
              <li><a href="https://www.colatour.com.tw/">可樂旅遊</a></li>
              <li><a href="https://www.kkday.com/">KKday</a></li>
              <li><a href="https://travel.yahoo.com.tw/">Yahoo!旅遊</a></li>
              <li><a href="https://www.settour.com.tw/">東南旅遊</a></li>
              <li><a href="https://www.startravel.com.tw/">燦星旅遊</a></li>
            </ul>
          </nav>
          <!-- Subscribe -->
          <nav class="rlr-footer__menu__col rlr-footer__menu__col--lg">
            <h4>合作洽詢</h4>
            <a href="#" class="rlr-footer__menu__col__letstalk">行程推廣敬請洽詢</a>
            <form class="rlr-subscribe" data-aos="fade-up" data-aos-offset="250" data-aos-duration="700">
              <input type="email" class="rlr-subscribe__input" placeholder="請輸入貴公司合作E-Mail" />
              <button class="btn">立即洽詢</button>
            </form>
          </nav>
        </div>
        <!-- Footer bottom -->
        <div class="rlr-footer__legal">
          <div class="rlr-footer__legal__row rlr-footer__legal__row--top">
            <div class="rlr-footer__legal__row__col">
              <a href="#">隱私權宣告</a>
            </div>
            
          </div>
          <!-- Footer copyright -->
          <div class="rlr-footer__legal__row rlr-footer__legal__row--bottom">
            <div class="rlr-footer__legal__row__col">
              <span>2022 © 預遊網 / 快樂遊國際有限公司</span>
            </div>
            <!-- Footer payment thumbs -->
            <div class="rlr-footer__legal__row__col">
              <img src="./assets/images/ele-payments.png" alt="Payments" />
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- Scripts -->
    <script src="./vendors/navx/js/navigation.min.js" defer></script>
    <script src="./js/main.js" defer></script>
    <script>
      let search = location.search.substring(1);
      let req = JSON.parse('{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g,'":"') + '"}');
      let productId = req.id;
      let price = 0;
      let count = 1;
      let totalPrice = 0;
      let title = "";
      let travel = {};
      const formatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD'
      });
      $.getJSON("https://api.travelhappy.shop/one?id=" + productId, function(json) {
        if(json.success) {
          console.log(json);
          title = json.data.title;
          travel = json.data;
          $("#_title").html(title);
          $("#_subtitle").html(json.data.sub1 + "|" + json.data.sub2);
          $("#_img").attr("src", "https://api.travelhappy.shop/img/" + json.data.img);
          price = parseInt(json.data.price.replaceAll(",", "").replaceAll(".", ""));
          count = parseInt($("#pselect").val());
          totalPrice = price * (count/2);
          let total = formatter.format(totalPrice).replaceAll("$", "").replaceAll(".00", "");
          $("#_total1").html("NT " + total);
          $("#_total2").html("NT " + total);
          $("#totalAmount").html("NT " + total);
          $("#_price").html("NT " + json.data.price);
          $("#order_review").show();
          let flights = json.data.dates;
          for(let flight of flights) {
            let flightInfo = "<b>去程 </b>" + flight.company_1 + " <b>回程 </b>" + flight.company_2;
            let formatedDate = "<b>" + flight.plane_1 + "</b> " + flight.startDate_1 + " <b>" + flight.startTime_1 + "</b>起飛 - <b>" + flight.endTime_1 + "</b>降落</br>";
            formatedDate += "<b>" + flight.plane_2 + "</b> " + flight.startDate_2 + " <b>" + flight.startTime_2 + "</b>起飛 - <b>" + flight.endTime_2 + "</b>降落";
            addFlight(flightInfo, formatedDate, flight);
          }
        }
      });

      let flightMap = {};
      let currentFlight = null;

      function addFlight(masterInfo, dateInfo, flight) {
        let flightId = generateString(10);
        flightMap[flightId] = flight;
        let content = '<li class="cart-item-card__header wc_payment_method payment_method_stripe">';
              content +='<div>';
                content +='<input id="wc-stripe-new-payment-method" onclick="selectFlight(\'' + flightId + '\')" class="input-radio" name="payment_method" type="radio" value="true" />';
              content +='</div>';
              content +='<div>';
                content +='<p class="cart-item-card__title" id="_title">' + masterInfo + '</p>';
                content +='<p class="cart-item-card__date">';
                  content +='<span id="_date"> ' + dateInfo + ' </span>';
                content +='</p>';
              content +='</div>';
            content +='</li>';   
        $("#planelist").append(content);
      }

      function selectFlight(id) {
        currentFlight = flightMap[id];
        console.log(currentFlight);
      }

      function generateString(length) {
        const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        let result = ' ';
        const charactersLength = characters.length;
        for ( let i = 0; i < length; i++ ) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return result.trim();
      }

      function updatePrice() {
        count = parseInt($("#pselect").val());
        for(let i=0;i<6;i++) {
          $("#passenger" + i).hide();
        }
        for(let i=0;i<count;i++) {
          $("#passenger" + i).show();
        }
        const formatter = new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD'
        });
        totalPrice = price * (count/2);
        let total = formatter.format(totalPrice).replaceAll("$", "").replaceAll(".00", "");
        $("#_total1").html("NT " + total);
        $("#_total2").html("NT " + total);
        $("#totalAmount").html("NT " + total);
      }

      function checkform() {
        let name = $("#billing_name").val();
        let email = $("#billing_email").val();
        let phone = $("#billing_phone").val();
        let address = $("#billing_address").val();
        let id = $("#billing_id").val();
        if(name.length == 0) {
          alert("請輸入姓名");
          return false;
        }
        if(phone.length ==0) {
          alert("請輸入電話");
          return false;
        }
        if(validatePhoneNumber(phone) == false) {
          alert("請輸入正確的手機號碼");
          return false;
        }
        if(id.length == 0) {
          alert("請輸入身分證字號");
          return false;
        }
        if(verifyId(id) == false) {
          alert("請輸入正確的身分證字號");
          return false;
        }
        if(address.length == 0) {
          alert("請輸入地址");
          return false;
        }
        if(email.length == 0) {
          alert("請輸入電子郵件");
          return false;
        }
        if(validateEmail(email) == false) {
          alert("請輸入正確的電子郵件");
          return false;
        }
        if(!$('input[name=payment_method]:checked').val()) {
          alert("請選擇航班");
          return false;
        }
        checkout(title + " * " + count, totalPrice);
      }

      function validateEmail(email) {
        let rst = String(email)
          .toLowerCase()
          .match(
            /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
          );
        return rst != null;
      };

      function verifyId(id) {
        id = id.trim();
        verification = id.match("^[A-Z][12]\\d{8}$")
        if(!verification){
          return false
        }
        let conver = "ABCDEFGHJKLMNPQRSTUVXYWZIO"
        let weights = [1, 9, 8, 7, 6, 5, 4, 3, 2, 1, 1]
        id = String(conver.indexOf(id[0]) + 10) + id.slice(1);
        checkSum = 0
        for (let i = 0; i < id.length; i++) {
            c = parseInt(id[i])
            w = weights[i]
            checkSum += c * w
        }
        return checkSum % 10 == 0
      }

      function validatePhoneNumber(input_str) {
          var re = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
          return re.test(input_str);
      }

      function checkout(productId, amount) {
        let name = $("#billing_name").val();
        let email = $("#billing_email").val();
        let phone = $("#billing_phone").val();
        let address = $("#billing_address").val();
        let id = $("#billing_id").val();
        let count = $("#pselect").val();
        let passengers = [];
        for(let i=0;i<count;i++) {
          passengers.push({
            name: $("#passenger" + i + " input[name='passenger_name']").val(),
            globalName: $("#passenger" + i + " input[name='passenger_eng_name']").val(),
            passportNum: $("#passenger" + i + " input[name='passenger_num']").val(),
            passportValid: $("#passenger" + i + " input[name='passenger_passport_valid']").val(),
            sex: $("#passenger" + i + " input[name='passenger_sex']").val(),
            birth: $("#passenger" + i + " input[name='passenger_birth']").val(),
          });
        }
        $.ajax({
            url: "https://api.travelhappy.shop/checkout",
            data: JSON.stringify({
              totalPrice: totalPrice,
              people: count,
              customer: {
                name: name,
                email: email,
                phone: phone,
                address: address,
                id: id
              },
              passengers: passengers,
              flight: currentFlight,
              product: travel
            }),
            type: "POST",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function(rtv){
                if(rtv.success) {
                  alert("完成預定，請至信箱收取訂單確認信並完成付款已確認訂單");
                  location.href = "https://travelhappy.shop";
                  //payPage(productId);
                }
            },
            error: function(xhr, ajaxOptions, thrownError){
                console.log(xhr.status);
                console.log(thrownError);
            }
        });
        
      }

      
    </script>
  </body>
</html>
